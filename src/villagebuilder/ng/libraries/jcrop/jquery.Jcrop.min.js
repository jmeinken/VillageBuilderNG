/**
 * Modified version of jquery.Jcrop.js v0.9.12
 *
 * Copyright (c) 2008-2013 Tapmodo Interactive LLC {{{
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 *
 * }}}
 */

(function(e){var t=jPickUploadAPI;var n=t.pf;var r=t.idd;var i=t.diic;var s=t.uc;e.Jcrop=function(t,o){function h(e){return Math.round(e)+"px"}function p(e){return u.baseClass+"-"+e}function d(){return e.fx.step.hasOwnProperty("backgroundColor")}function v(t){var n=e(t).offset();return[n.left,n.top]}function m(e){return[e.pageX-a[0],e.pageY-a[1]]}function g(t){if(typeof t!=="object")t={};if(u.fileInputs){e.each(u.fileInputs,function(e,t){if(t._$fileInput){t._$fileInput.off(".jcropUpload");t.removeAttribute("_$fileInput")}})}if(u.dragDrops){e.each(u.dragDrops,function(e,t){if(t._$dragDrop){t._$dragDrop.off(".jcropUpload");t.removeAttribute("_$dragDrop")}})}u=e.extend(u,t);e.each(["onChange","onSelect","onRelease","onDblClick","beforePick","afterPick"],function(e,t){if(typeof u[t]!=="function")u[t]=function(){}});var i=u["onSelect"];u["onSelect"]=function(t){i.call(St,t);if(u["canvases"]){var n=u["canvases"];e.each(n,function(e,t){St.drawInCanvas(t.object)})}};if(u["fileInputs"]){var s=[];e.each(u["fileInputs"],function(t,n){if(typeof n!=="object"){n=e(n)[0]}s.push(n)});u.fileInputs=s;if(n){e.each(s,function(t,r){r._$fileInput=e(r);r._$fileInput.on("change.jcropUpload",function(e){n(St,u,this.files[0])})})}}if(u["canvases"]){e.each(u["canvases"],function(t,n){if(typeof n.object!=="object"){n.object=e(n.object)[0]}})}if(u.dragDrops){var o=[];e.each(u.dragDrops,function(t,n){if(typeof n!=="object"){n=e(n)[0]}o.push(n)});u.dragDrops=o;e.each(o,function(t,i){i._$dragDrop=e(i);r(i._$dragDrop,function(e){n(St,u,e)})})}}function y(e,t,n){a=v(D);ot.setCursor(e==="move"?e:e+"-resize");if(e==="move"){return ot.activateHandlers(w(t),N,n)}var r=rt.getFixed();var i=E(e);var s=rt.getCorner(E(i));rt.setPressed(rt.getCorner(i));rt.setCurrent(s);ot.activateHandlers(b(e,r),N,n)}function b(e,t){return function(n){if(!u.aspectRatio){switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2;break}}else{switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1;break}}rt.setCurrent(n);st.update()}}function w(e){var t=e;ut.watchKeys();return function(e){rt.moveOffset([e[0]-t[0],e[1]-t[1]]);t=e;st.update()}}function E(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function S(e){return function(t){if(u.disabled){return false}if(e==="move"&&!u.allowMove){return false}a=v(D);Z=true;y(e,m(t));t.stopPropagation();t.preventDefault();return false}}function x(e,t,n){var r=e.width(),i=e.height();if(r>t&&t>0){r=t;i=t/e.width()*e.height()}if(i>n&&n>0){i=n;r=n/e.height()*e.width()}Q=e.width()/r;G=e.height()/i;e.width(r).height(i)}function T(e){return{x:e.x*Q,y:e.y*G,x2:e.x2*Q,y2:e.y2*G,w:e.w*Q,h:e.h*G}}function N(e){var t=rt.getFixed();if(t.w>u.minSelect[0]&&t.h>u.minSelect[1]){st.enableHandles();st.done()}else{st.release()}ot.setCursor(u.allowSelect?"crosshair":"default")}function C(e){if(u.disabled){return false}if(!u.allowSelect){return false}Z=true;a=v(D);st.disableHandles();ot.setCursor("crosshair");var t=m(e);rt.setPressed(t);st.update();ot.activateHandlers(k,N,e.type.substring(0,5)==="touch");ut.watchKeys();e.stopPropagation();e.preventDefault();return false}function k(e){rt.setCurrent(e);st.update()}function L(){var t=e("<div></div>").addClass(p("tracker"));if(l){t.css({opacity:0,backgroundColor:"white"})}return t}function at(e){B.removeClass().addClass(p("holder")).addClass(e)}function ft(e,t){function b(){window.setTimeout(w,c)}var n=e[0]/Q,r=e[1]/G,i=e[2]/Q,s=e[3]/G;if(et){return}var o=rt.flipCoords(n,r,i,s),a=rt.getFixed(),f=[a.x,a.y,a.x2,a.y2],l=f,c=u.animationDelay,h=o[0]-f[0],p=o[1]-f[1],d=o[2]-f[2],v=o[3]-f[3],m=0,g=u.swingSpeed;n=l[0];r=l[1];i=l[2];s=l[3];st.animMode(true);var y;var w=function(){return function(){m+=(100-m)/g;l[0]=Math.round(n+m/100*h);l[1]=Math.round(r+m/100*p);l[2]=Math.round(i+m/100*d);l[3]=Math.round(s+m/100*v);if(m>=99.8){m=100}if(m<100){ct(l);b()}else{st.done();st.animMode(false);if(typeof t==="function"){t.call(St)}}}}();b()}function lt(e){ct([e[0]/Q,e[1]/G,e[2]/Q,e[3]/G]);u.onSelect.call(St,T(rt.getFixed()));st.enableHandles()}function ct(e){rt.setPressed([e[0],e[1]]);rt.setCurrent([e[2],e[3]]);st.update()}function ht(){return T(rt.getFixed())}function pt(){return rt.getFixed()}function dt(e){g(e);Et()}function vt(){u.disabled=true;st.disableHandles();st.setCursor("default");ot.setCursor("default")}function mt(){u.disabled=false;Et()}function gt(){st.done();ot.activateHandlers(null,null)}function yt(){B.remove();O.show();O.css("visibility","visible");e(t).removeData("Jcrop")}function bt(t,n){st.release();vt();var r=new Image;r.onload=function(){var i=r.width;var s=r.height;var o=u.boxWidth;var a=u.boxHeight;D.origimg=e(r);D.width(i).height(s);D.attr("src",t);j.attr("src",t);x(D,o,a);P=D.width();H=D.height();j.width(P).height(H);U.width(P+R*2).height(H+R*2);B.width(P).height(H);it.resize(P,H);mt();if(typeof n==="function"){n.call(St)}};r.src=t}function wt(e,t,n){var r=t||u.bgColor;if(u.bgFade&&d()&&u.fadeTime&&!n){e.animate({backgroundColor:r},{queue:false,duration:u.fadeTime})}else{e.css("backgroundColor",r)}}function Et(e){if(u.allowResize){if(e){st.enableOnly()}else{st.enableHandles()}}else{st.disableHandles()}ot.setCursor(u.allowSelect?"crosshair":"default");st.setCursor(u.allowMove?"move":"default");if(u.hasOwnProperty("trueSize")){Q=u.trueSize[0]/P;G=u.trueSize[1]/H}if(u.hasOwnProperty("setSelect")){lt(u.setSelect);st.done();delete u.setSelect}it.refresh();if(u.bgColor!=z){wt(u.shade?it.getShades():B,u.shade?u.shadeColor||u.bgColor:u.bgColor);z=u.bgColor}if(W!=u.bgOpacity){W=u.bgOpacity;if(u.shade)it.refresh();else st.setBgOpacity(W)}X=u.maxSize[0]||0;V=u.maxSize[1]||0;J=u.minSize[0]||0;K=u.minSize[1]||0;if(u.hasOwnProperty("outerImage")){D.attr("src",u.outerImage);delete u.outerImage}st.refresh()}var u=e.extend({},e.Jcrop.defaults),a,f=navigator.userAgent.toLowerCase(),l=/msie/.test(f),c=/msie [1-6]\./.test(f);if(typeof t!=="object"){t=e(t)[0]}if(typeof o!=="object"){o={}}g(o);var A={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0};var O=e(t),M=true;if(t.tagName=="IMG"){if(O[0].width!=0&&O[0].height!=0){O.width(O[0].width);O.height(O[0].height)}else{var _=new Image;_.src=O[0].src;O.width(_.width);O.height(_.height)}var D=O.clone().removeAttr("id").css(A).show();D.width(O.width());D.height(O.height());O.after(D).hide()}else{D=O.css(A).show();M=false;if(u.shade===null){u.shade=true}}D.origimg=O;x(D,u.boxWidth,u.boxHeight);var P=D.width(),H=D.height(),B=e("<div />").width(P).height(H).addClass(p("holder")).css({position:"relative",backgroundColor:u.bgColor}).insertAfter(O).append(D);if(u.addClass){B.addClass(u.addClass)}var j=e("<div />"),F=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),I=e("<div />").width("100%").height("100%").css("zIndex",320),q=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=rt.getFixed();u.onDblClick.call(St,e)}).insertBefore(D).append(F,I);if(M){j=e("<img />").attr("src",D.attr("src")).css(A).width(P).height(H),F.append(j)}if(c){q.css({overflowY:"hidden"})}var R=u.boundary;var U=L().width(P+R*2).height(H+R*2).css({position:"absolute",top:h(-R),left:h(-R),zIndex:290}).mousedown(C);var z=u.bgColor,W=u.bgOpacity,X,V,J,K,Q,G,Y=true,Z,et,tt;a=v(D);var nt=function(){function e(){var e={},t=["touchstart","touchmove","touchend"],n=document.createElement("div"),r;try{for(r=0;r<t.length;r++){var i=t[r];i="on"+i;var s=i in n;if(!s){n.setAttribute(i,"return;");s=typeof n[i]=="function"}e[t[r]]=s}return e.touchstart&&e.touchend&&e.touchmove}catch(o){return false}}function t(){if(u.touchSupport===true||u.touchSupport===false)return u.touchSupport;else return e()}return{createDragger:function(e){return function(t){if(u.disabled){return false}if(e==="move"&&!u.allowMove){return false}a=v(D);Z=true;y(e,m(nt.cfilter(t)),true);t.stopPropagation();t.preventDefault();return false}},newSelection:function(e){return C(nt.cfilter(e))},cfilter:function(e){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;return e},isSupported:e,support:t()}}();var rt=function(){function o(i){i=p(i);n=e=i[0];r=t=i[1]}function a(e){e=p(e);i=e[0]-n;s=e[1]-r;n=e[0];r=e[1]}function f(){return[i,s]}function l(i){var s=i[0],o=i[1];if(0>e+s){s-=s+e}if(0>t+o){o-=o+t}if(H<r+o){o+=H-(r+o)}if(P<n+s){s+=P-(n+s)}e+=s;n+=s;t+=o;r+=o}function c(e){var t=h();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function h(){if(!u.aspectRatio){return v()}var i=u.aspectRatio,s=u.minSize[0]/Q,o=u.maxSize[0]/Q,a=u.maxSize[1]/G,f=n-e,l=r-t,c=Math.abs(f),h=Math.abs(l),p=c/h,g,y,b,w;if(o===0){o=P*10}if(a===0){a=H*10}if(p<i){y=r;b=h*i;g=f<0?e-b:b+e;if(g<0){g=0;w=Math.abs((g-e)/i);y=l<0?t-w:w+t}else if(g>P){g=P;w=Math.abs((g-e)/i);y=l<0?t-w:w+t}}else{g=n;w=c/i;y=l<0?t-w:t+w;if(y<0){y=0;b=Math.abs((y-t)*i);g=f<0?e-b:b+e}else if(y>H){y=H;b=Math.abs(y-t)*i;g=f<0?e-b:b+e}}if(g>e){if(g-e<s){g=e+s}else if(g-e>o){g=e+o}if(y>t){y=t+(g-e)/i}else{y=t-(g-e)/i}}else if(g<e){if(e-g<s){g=e-s}else if(e-g>o){g=e-o}if(y>t){y=t+(e-g)/i}else{y=t-(e-g)/i}}if(g<0){e-=g;g=0}else if(g>P){e-=g-P;g=P}if(y<0){t-=y;y=0}else if(y>H){t-=y-H;y=H}return m(d(e,t,g,y))}function p(e){if(e[0]<0)e[0]=0;if(e[1]<0)e[1]=0;if(e[0]>P)e[0]=P;if(e[1]>H)e[1]=H;return[Math.round(e[0]),Math.round(e[1])]}function d(e,t,n,r){var i=e,s=n,o=t,u=r;if(n<e){i=n;s=e}if(r<t){o=r;u=t}return[i,o,s,u]}function v(){var i=n-e,s=r-t,o;if(X&&Math.abs(i)>X){n=i>0?e+X:e-X}if(V&&Math.abs(s)>V){r=s>0?t+V:t-V}if(K/G&&Math.abs(s)<K/G){r=s>0?t+K/G:t-K/G}if(J/Q&&Math.abs(i)<J/Q){n=i>0?e+J/Q:e-J/Q}if(e<0){n-=e;e-=e}if(t<0){r-=t;t-=t}if(n<0){e-=n;n-=n}if(r<0){t-=r;r-=r}if(n>P){o=n-P;e-=o;n-=o}if(r>H){o=r-H;t-=o;r-=o}if(e>P){o=e-H;r-=o;t-=o}if(t>H){o=t-H;r-=o;t-=o}return m(d(e,t,n,r))}function m(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var e=0,t=0,n=0,r=0,i,s;return{flipCoords:d,setPressed:o,setCurrent:a,getOffset:f,moveOffset:l,getCorner:c,getFixed:h}}();var it=function(){function i(e,t){r.left.css({height:h(t)});r.right.css({height:h(t)})}function s(){return o(rt.getFixed())}function o(e){r.top.css({left:h(e.x),width:h(e.w),height:h(e.y)});r.bottom.css({top:h(e.y2),left:h(e.x),width:h(e.w),height:h(H-e.y2)});r.right.css({left:h(e.x2),width:h(P-e.x2)});r.left.css({width:h(e.x)})}function a(){return e("<div />").css({position:"absolute",backgroundColor:u.shadeColor||u.bgColor}).appendTo(n)}function f(){if(!t){t=true;n.insertBefore(D);s();st.setBgOpacity(1,0,1);j.hide();l(u.shadeColor||u.bgColor,1);if(st.isAwake()){p(u.bgOpacity,1)}else p(1,1)}}function l(e,t){wt(v(),e,t)}function c(){if(t){n.remove();j.show();t=false;if(st.isAwake()){st.setBgOpacity(u.bgOpacity,1,1)}else{st.setBgOpacity(1,1,1);st.disableHandles()}wt(B,0,1)}}function p(e,r){if(t){if(u.bgFade&&!r){n.animate({opacity:1-e},{queue:false,duration:u.fadeTime})}else n.css({opacity:1-e})}}function d(){u.shade?f():c();if(st.isAwake())p(u.bgOpacity)}function v(){return n.children()}var t=false,n=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),r={top:a(),left:a().height(H),right:a().height(H),bottom:a()};return{update:s,updateRaw:o,getShades:v,setBgColor:l,enable:f,disable:c,resize:i,refresh:d,opacity:p}}();var st=function(){function a(t){var n=e("<div />").css({position:"absolute",opacity:u.borderOpacity}).addClass(p(t));F.append(n);return n}function f(t,n){var r=e("<div />").mousedown(S(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+t);if(nt.support){r.bind("touchstart.jcrop",nt.createDragger(t))}I.append(r);return r}function l(e){var t=u.handleSize,r=f(e,n++).css({opacity:u.handleOpacity}).addClass(p("handle"));if(t){r.width(t).height(t)}return r}function c(e){return f(e,n++).addClass("jcrop-dragbar")}function d(e){var t;for(t=0;t<e.length;t++){s[e[t]]=c(e[t])}}function v(e){var t,n;for(n=0;n<e.length;n++){switch(e[n]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline";break}r[e[n]]=a(t)}}function m(e){var t;for(t=0;t<e.length;t++){i[e[t]]=l(e[t])}}function g(e,t){if(!u.shade){j.css({top:h(-t),left:h(-e)})}q.css({top:h(t),left:h(e)})}function y(e,t){q.width(Math.round(e)).height(Math.round(t))}function b(){var e=rt.getFixed();rt.setPressed([e.x,e.y]);rt.setCurrent([e.x2,e.y2]);w()}function w(e){if(t){return E(e)}}function E(e){var n=rt.getFixed();y(n.w,n.h);g(n.x,n.y);if(u.shade)it.updateRaw(n);t||N();if(e){u.onSelect.call(St,T(n))}else{u.onChange.call(St,T(n))}}function x(e,n,r){if(!t&&!n)return;if(u.bgFade&&!r){D.animate({opacity:e},{queue:false,duration:u.fadeTime})}else{D.css("opacity",e)}}function N(){q.show();if(u.shade)it.opacity(W);else x(W,true);t=true}function C(){O();q.hide();if(u.shade)it.opacity(1);else x(1);t=false;u.onRelease.call(St)}function k(){if(o){I.show()}}function A(){o=true;if(u.allowResize){I.show();return true}}function O(){o=false;I.hide()}function M(e){if(e){et=true;O()}else{et=false;A()}}function _(){M(false);b()}var t,n=370,r={},i={},s={},o=false;if(u.dragEdges&&e.isArray(u.createDragbars))d(u.createDragbars);if(e.isArray(u.createHandles))m(u.createHandles);if(u.drawBorders&&e.isArray(u.createBorders))v(u.createBorders);e(document).bind("touchstart.jcrop-ios",function(t){if(e(t.currentTarget).hasClass("jcrop-tracker"))t.stopPropagation()});var P=L().mousedown(S("move")).css({cursor:"move",position:"absolute",zIndex:360});if(nt.support){P.bind("touchstart.jcrop",nt.createDragger("move"))}F.append(P);O();return{updateVisible:w,update:E,release:C,refresh:b,isAwake:function(){return t},setCursor:function(e){P.css("cursor",e)},enableHandles:A,enableOnly:function(){o=true},showHandles:k,disableHandles:O,animMode:M,setBgOpacity:x,done:_}}();var ot=function(){function i(t){U.css({zIndex:450});if(t)e(document).bind("touchmove.jcrop",l).bind("touchend.jcrop",c);else if(r)e(document).bind("mousemove.jcrop",o).bind("mouseup.jcrop",a)}function s(){U.css({zIndex:290});e(document).unbind(".jcrop")}function o(e){t(m(e));return false}function a(e){e.preventDefault();e.stopPropagation();if(Z){Z=false;n(m(e));if(st.isAwake()){u.onSelect.call(St,T(rt.getFixed()))}s();t=function(){};n=function(){}}return false}function f(e,r,s){Z=true;t=e;n=r;i(s);return false}function l(e){t(m(nt.cfilter(e)));return false}function c(e){return a(nt.cfilter(e))}function h(e){U.css("cursor",e)}var t=function(){},n=function(){},r=u.trackDocument;if(!r){U.mousemove(o).mouseup(a).mouseout(a)}D.before(U);return{activateHandlers:f,setCursor:h}}();var ut=function(){function r(){if(u.keySupport){t.show();t.focus()}}function i(e){t.hide()}function s(e,t,n){if(u.allowMove){rt.moveOffset([t,n]);st.updateVisible(true)}e.preventDefault();e.stopPropagation()}function o(e){if(e.ctrlKey||e.metaKey){return true}tt=e.shiftKey?true:false;var t=tt?10:1;switch(e.keyCode){case 37:s(e,-t,0);break;case 39:s(e,t,0);break;case 38:s(e,0,-t);break;case 40:s(e,0,t);break;case 27:if(u.allowSelect)st.release();break;case 9:return true}return false}var t=e('<input type="radio" />').css({position:"fixed",left:"-500px",width:"12px"}).addClass("jcrop-keymgr"),n=e("<div />").css({position:"absolute",overflow:"hidden"}).append(t);if(u.keySupport){t.keydown(o).blur(i);if(c||!u.fixedSupport){t.css({position:"absolute",left:"-20px"});n.append(t).insertBefore(D)}else{t.insertBefore(D)}}return{watchKeys:r}}();if(nt.support)U.bind("touchstart.jcrop",nt.newSelection);I.hide();Et(true);var St={setImage:bt,animateTo:ft,setSelect:lt,setOptions:dt,tellSelect:ht,tellScaled:pt,setClass:at,disable:vt,enable:mt,cancel:gt,release:st.release,destroy:yt,focus:ut.watchKeys,getBounds:function(){return[P*Q,H*G]},getWidgetSize:function(){return[P,H]},getScaleFactor:function(){return[Q,G]},getOptions:function(){return u},ui:{holder:B,selection:q}};St.isSelected=function(){var e=St.tellSelect();return e.w>0&&e.h>0};if(i){St["drawInCanvas"]=i(D,ht)}else{St["drawInCanvas"]=function(){}}if(s){St.upload=function(t,n){if(!St.isSelected()){throw new Error("not selected")}var r={};e.each(t,function(t,n){var i=n.field||n.key||"file";if(!n.format){n.format="image/jpeg"}var s={format:n.format,quality:n.quality};if(n.key){s.object=u.canvases[n.key].object}else if(n.object){s.object=n.object;if(typeof s.object!=="object"){s.object=e(s.object)[0]}}else{var o=St.tellSelect();var a;if(n.size){a=n.size}else{a=[o.w,o.h]}var f=document.createElement("canvas");f.width=a[0];f.height=a[1];St.drawInCanvas(f);s.object=f}r[i]=s});s(r,n)}}else{St.upload=function(){}}if(n){St.pickFile=function(e){n(St,u,e)}}else{St.pickFile=function(){}}if(l)B.bind("selectstart",function(){return false});O.data("Jcrop",St);return St};e.fn.Jcrop=function(t,n){var r;this.each(function(){if(e(this).data("Jcrop")){if(t==="api")return e(this).data("Jcrop");else e(this).data("Jcrop").setOptions(t)}else{if(this.tagName=="IMG")e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"});r=e.Jcrop(this,t);if(e.isFunction(n))n.call(r)});else{e(this).css({display:"block",visibility:"hidden"});r=e.Jcrop(this,t);if(e.isFunction(n))n.call(r)}}});return this};e.Jcrop.Loader=function(t,n,r){function o(){if(s.complete){i.unbind(".jcloader");if(e.isFunction(n))n.call(s)}else window.setTimeout(o,50)}var i=e(t),s=i[0];i.bind("load.jcloader",o).bind("error.jcloader",function(t){i.unbind(".jcloader");if(e.isFunction(r))r.call(s)});if((s.complete||!s.src)&&e.isFunction(n)){i.unbind(".jcloader");n.call(s)}};e.Jcrop.defaults={allowSelect:true,allowMove:true,allowResize:true,trackDocument:true,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:false,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:true,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:true,dragEdges:true,fixedSupport:true,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],fileInputs:[],canvases:{},dragDrops:[],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){},beforePick:function(){},afterPick:function(){}}})(jQuery)