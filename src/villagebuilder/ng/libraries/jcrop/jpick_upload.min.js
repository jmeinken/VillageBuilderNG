/** jQuery.JcropUpload.js v1.0.0
 * jQuery Image Cropping & Uploading Plugin
 * jQuery version 1.8.0+
 * jquery.Jcrop.js v0.9.12
 * Author: Tianhu Yang <tianhuyang@gmail.com>
 * Copyright (c) 2014 iNomad LLC
 */
var jPickUploadAPI=function(){var e={};e.pf=window.FileReader&&function(e,t,n){var r=new FileReader;r.onload=function(n){var r=new Image;r.onload=function(n){if(!t.beforePick.call(e,r)){e.setImage(r.src,t.afterPick)}};r.onerror=function(n){t.beforePick.call(e,null)};r.src=n.target.result};r.readAsDataURL(n)};e.idd=function(e,t){var n=e[0].getAttribute("data-jcu-active");e.on("dragenter.jcropUpload",function(t){t.stopPropagation();t.preventDefault();if(n){e.addClass(n)}});e.on("dragover.jcropUpload",function(t){if(n){e.addClass(n)}t.stopPropagation();t.preventDefault()});e.on("dragleave.jcropUpload",function(t){if(n){e.removeClass(n)}});e.on("drop.jcropUpload",function(r){if(n){e.removeClass(n)}r.preventDefault();var i=r.originalEvent.dataTransfer.files;t(i[0])})};e.diic=window.HTMLCanvasElement&&function(e,t){var n=function(n){var r=e.origimg[0];var i=t();if(i.w==0||i.h==0){throw new Error("not selected")}if(i.x<0)i.x=0;if(i.y<0)i.y=0;if(i.w>r.width)i.w=r.width;if(i.h>r.height)i.h=r.height;try{var s=n.getContext("2d");s.clearRect(0,0,n.width,n.height);s.drawImage(r,i.x,i.y,i.w,i.h,0,0,n.width,n.height)}catch(o){}};return n};var t=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype;var n=window.BlobBuilder||window.MozBlobBuilder||window.WebKitBlobBuilder||window.MSBlobBuilder;var r=false;try{if(window.Blob){r=Boolean(new Blob)}}catch(i){}var s=false;try{if(r&&window.Uint8Array){s=(new Blob([new Uint8Array(128)])).size===128}}catch(i){}var o=(n||r)&&window.ArrayBuffer&&window.atob&&window.Uint8Array;if(o){o=function(e){var t=e.split(",");var i;if(t[0].indexOf("base64")==-1){i=decodeURIComponent(t[1])}else{i=atob(t[1])}var o=new ArrayBuffer(i.length);var u=new Uint8Array(o);for(var a=0;a<i.length;a+=1){u[a]=i.charCodeAt(a)}var f=t[0].split(":")[1].split(";")[0];var l;if(r){l=new Blob([s?u:o],{type:f})}else{l=new n;l.append(o);l=l.getBlob(f)}return l}}var u=function(e,n,r){var i;if(t&&o){if(t.mozGetAsFile){if(r&&t.toDataURL){i=o(e.toDataURL(n,r))}else{i=e.mozGetAsFile("blob",n)}}else if(t.toDataURL){i=o(e.toDataURL(n,r))}}return i};e.uc=u&&window.FormData&&function(e,t){var n;if(!t){t={}}if(t.data){if(t.data instanceof FormData){n=t.data}else{n=new FormData;$.each(t.data,function(e,t){n.append(e,t)})}}else{n=new FormData}var r=true;$.each(e,function(e,t){var i=u(t.object,t.format,t.quality);if(i){n.append(e,i)}else{r=false}});if(r){t.data=n;t.processData=t.contentType=false;if(t.onprogress){if(t.xhr){var i=t.xhr;t.xhr=function(){var e=i();if(e.upload){var n=e.upload.onprogress;e.upload.onprogress=function(e){t.onprogress.call(this,e);if(n){n.call(this,e)}}}return e}}else{t.xhr=function(){var e=$.ajaxSettings.xhr();if(e.upload){e.upload.onprogress=t.onprogress}return e}}}if(!t.type){t.type="POST"}r=$.ajax(t)}return r};return e}()