<form name="myform">

<div class="alert alert-danger" ng-if="request.formError">{{ request.formError }}</div>

<div ng-repeat="key in keyArray(request.request)">
    <div ng-if="request.inputErrors[key]" class="text-danger">{{ request.inputErrors[key][0] }}</div>
    <div ng-switch="request.meta[key].input_type">
        <div ng-switch-when="number" ng-class="{'form-group':true, 'has-error':request.inputErrors[key]}">
            <label class="control-label">
                {{ request.meta[key].name || key }}
            </label>
            <input class="form-control" name="min_length" type="number" integer 
                   ng-model="request.request[key]" 
                   ng-required="request.meta[key].required" />
            <span class="help-block" ng-show="request.meta[key].description">
                {{ request.meta[key].description }}
            </span>
            <span class="text-danger" ng-show="false">
                Please enter a valid integer or '0' for no minimum.
            </span>
        </div>
        <div ng-switch-when="text" ng-class="{'form-group':true, 'has-error':request.inputErrors[key]}">
            <label class="control-label">
                {{ request.meta[key].name || key }}
            </label>
            <input name="{{key}}" class="form-control" type="text" ng-model="request.request[key]" 
                   ng-required="request.meta[key].required"
                   ng-minlength="{{request.meta[key].minLength}}"
                   ng-maxlength="{{request.meta[key].maxLength}}"
                   ng-pattern="{{request.meta[key].pattern}}"
                   />
            <span class="help-block" ng-show="request.meta[key].description">
                {{ request.meta[key].description }}
            </span>
            <p ng-show="myform[key].$invalid">{{ myform[key].$error }}</p>
        </div>
        <div ng-switch-when="email" ng-class="{'form-group':true, 'has-error':request.inputErrors[key]}">
            <label class="control-label">
                {{ request.meta[key].name || key }}
            </label>
            <input name="{{key}}" class="form-control" type="email" ng-model="request.request[key]" 
                   ng-required="request.meta[key].required" />
            <span class="help-block" ng-show="request.meta[key].description">
                {{ request.meta[key].description }}
            </span>
            <p ng-show="myform[key].$invalid">{{ myform[key].$error }}</p>
        </div>
        <div ng-switch-when="password" ng-class="{'form-group':true, 'has-error':request.inputErrors[key]}">
            <label class="control-label">
                {{ request.meta[key].name || key }}
            </label>
            <input class="form-control" type="password" ng-model="request.request[key]"
                   ng-required="request.meta[key].required"
                   ng-minlength="{{request.meta[key].minLength}}"
                   ng-maxlength="{{request.meta[key].maxLength}}"
                   ng-pattern="{{request.meta[key].pattern}}" />
            <span class="help-block" ng-show="request.meta[key].description">
                {{ request.meta[key].description }}
            </span>
        </div>
        <div ng-switch-when="checkbox" ng-class="{'checkbox':true, 'form-group':true, 'has-error':request.inputErrors[key]}">
            <label>
                <input type="checkbox" ng-model="request.request[key]" />
                {{ request.meta[key].name || key }}
            </label>
            <span class="help-block" ng-show="request.meta[key].description">
                {{ request.meta[key].description }}
            </span>
        </div>
        <div ng-switch-when="select" ng-class="{'form-group':true, 'has-error':request.inputErrors[key]}">
            <label class="control-label">
                {{ request.meta[key].name || key }}
            </label>
            <select class="form-control" ng-model="request.request[key]"
                    ng-options="request.meta[key].options[option] for option in keyArray(request.meta[key].options)"
                    ng-required="request.meta[key].required">
            </select>
            <span class="help-block" ng-show="request.meta[key].description">
                {{ request.meta[key].description }}
            </span>
        </div>
    </div>
</div>
<button ng-click="submit.func()">{{submit.val}}</button> 
<button ng-if="reset" ng-click="reset.func()">{{reset.val}}</button><br><br>

</form>
